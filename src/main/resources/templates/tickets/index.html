<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="~{fragments\fragments :: head(title = 'Tickets')}">
</head>

<body>
	<header th:replace="~{fragments\fragments :: header}"></header>
    
    <main class="d-flex">
	    <!-- Sidebar -->
		<th:block th:replace="~{fragments\fragments :: sidebar(title = 'Tickets')}"></th:block>
		
		<!-- Content -->
        <div class="container text-center px-4">
            <h1 class="mt-4 mb-3">Lista dei Ticket</h1>
			<!-- Search bar -->
			<div class="d-flex justify-content-end align-items-baseline mb-3">
				<span class="fs-5 me-2">Filtra ticket per oggetto:</span>
			
				<form class="d-flex" role="search" method="GET" th:action="@{/tickets}">
				        <input class="form-control me-2" type="search" placeholder="oggetto..." aria-label="Search" name="title">
				        <button class="btn btn-outline-warning">Cerca</button>
				</form>
			</div>
			<!-- /Search bar -->
            <table th:if="${tickets.size() > 0}" class="table table-striped table-bordered">
				<thead>
					<tr>
						<th>Oggetto</th>
						<th>Stato</th>
						<th>Data creazione</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr th:each=" ticket : ${tickets}" th:object="${ticket}">
						<td class="align-middle">[[ *{title} ]]</td>
						<td class="align-middle">[[ *{status} ]]</td>
						<td class="align-middle">[[ *{createdAt} ]]</td>
						<td class="d-flex justify-content-center">
							<a class="btn btn-primary btn-sm me-3" th:href="@{/tickets/{id}(id = ${ticket.id})}" role="button">Visualizza dettagli</a>
							<a class="btn btn-success btn-sm" href="" role="button">Aggiungi Nota</a>
						</td>
					</tr>
				</tbody>
			</table>
			<th:block th:unless="${tickets.size() > 0}">
					<h3>Nessun ticket trovato...</h3>					
			</th:block>
        </div>
		<!-- /Content -->
    </main>

    <th:block th:replace="~{fragments\fragments :: scripts}"></th:block>
</body>
</html>
